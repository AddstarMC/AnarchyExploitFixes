package me.moomoo.anarchyexploitfixes.modules;

import me.moomoo.anarchyexploitfixes.AnarchyExploitFixes;
import me.moomoo.anarchyexploitfixes.modules.recode.chat.*;
import me.moomoo.anarchyexploitfixes.modules.recode.command.CommandWhitelist;
import me.moomoo.anarchyexploitfixes.modules.recode.misc.FirstJoinMessage;
import me.moomoo.anarchyexploitfixes.modules.recode.misc.JoinLeaveMessages;
import me.moomoo.anarchyexploitfixes.modules.recode.misc.MaskKickMessages;
import me.moomoo.anarchyexploitfixes.modules.recode.misc.PreventSpamKick;
import me.moomoo.anarchyexploitfixes.modules.recode.options1b1t.*;
import me.moomoo.anarchyexploitfixes.modules.recode.patches.*;
import me.moomoo.anarchyexploitfixes.modules.recode.patches.dupefixes.*;
import me.moomoo.anarchyexploitfixes.modules.recode.patches.netherportals.PreventAllEntities;
import me.moomoo.anarchyexploitfixes.modules.recode.patches.netherportals.PreventDroppedItems;
import me.moomoo.anarchyexploitfixes.modules.recode.patches.netherportals.PreventFireworks;
import me.moomoo.anarchyexploitfixes.modules.recode.patches.netherportals.PreventPortalTraps;
import org.bukkit.event.HandlerList;
import org.bukkit.plugin.Plugin;

import java.util.HashSet;

public interface AnarchyExploitFixesModule {

    void enable();
    boolean shouldEnable();

    HashSet<AnarchyExploitFixesModule> modules = new HashSet<>();

    static void reloadModules() {
        modules.clear();
        Plugin plugin = AnarchyExploitFixes.getInstance();
        plugin.getServer().getScheduler().cancelTasks(plugin);
        HandlerList.unregisterAll(plugin);

        // Chat
        modules.add(new BannedRegex());
        modules.add(new BannedWords());
        modules.add(new CharacterLimit());
        modules.add(new PreventChatSpam());
        modules.add(new PreventLinks());
        modules.add(new PreventLinkSpam());
        modules.add(new PreventUnicodeDot());
        modules.add(new ReplaceAt());

        // Command
        modules.add(new CommandWhitelist());
        modules.add(new FixChatCoIgnore());

        // 1b1t Options
        modules.add(new DistanceAwayToTP());
        modules.add(new HurtCommands());
        modules.add(new NickResetOnly());
        modules.add(new UseSparkHealth());

        // Misc
        modules.add(new FirstJoinMessage());
        modules.add(new JoinLeaveMessages());
        modules.add(new MaskKickMessages());
        modules.add(new PreventSpamKick());
        modules.add(new BypassSlots());
        modules.add(new DisableNCPGeyser());
        modules.add(new PlaceBedrock());
        modules.add(new SlowDupe());

        // Patches
        modules.add(new BookBan());
        modules.add(new BowBomb());
        modules.add(new Burrow());
        modules.add(new CommandSign());
        modules.add(new PreventPortalTraps());
        modules.add(new InvalidNames());
        modules.add(new GodMode());
        modules.add(new EndPortalDestruction());
        // Nether Portals
        modules.add(new PreventAllEntities());
        modules.add(new PreventDroppedItems());
        modules.add(new PreventFireworks());
        //Dupe fixes
        modules.add(new ChestedEntitiesInPortals());
        modules.add(new ChestsOnEntities()); // test
        modules.add(new EndPortalDupe());
        modules.add(new ExpDupePatch1());
        modules.add(new ExpDupePatch2());

        for (AnarchyExploitFixesModule module : modules) {
            if (module.shouldEnable()) module.enable();
        }
    }
}
