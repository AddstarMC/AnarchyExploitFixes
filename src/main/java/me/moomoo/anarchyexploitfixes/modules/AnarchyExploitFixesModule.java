package me.moomoo.anarchyexploitfixes.modules;

import me.moomoo.anarchyexploitfixes.AnarchyExploitFixes;
import me.moomoo.anarchyexploitfixes.modules.recode.chat.*;
import me.moomoo.anarchyexploitfixes.modules.recode.command.CommandWhitelist;
import me.moomoo.anarchyexploitfixes.modules.recode.misc.FirstJoinMessage;
import me.moomoo.anarchyexploitfixes.modules.recode.misc.JoinLeaveMessages;
import me.moomoo.anarchyexploitfixes.modules.recode.options1b1t.DistanceAwayToTP;
import me.moomoo.anarchyexploitfixes.modules.recode.options1b1t.HurtCommands;
import me.moomoo.anarchyexploitfixes.modules.recode.options1b1t.NickResetOnly;
import me.moomoo.anarchyexploitfixes.modules.recode.options1b1t.UseSparkHealth;
import org.bukkit.event.HandlerList;
import org.bukkit.plugin.Plugin;

import java.util.HashSet;

public interface AnarchyExploitFixesModule {
    void enable();
    boolean shouldEnable();

    HashSet<AnarchyExploitFixesModule> modules = new HashSet<>();

    static void reloadModules() {
        modules.clear();
        Plugin plugin = AnarchyExploitFixes.getInstance();
        plugin.getServer().getScheduler().cancelTasks(plugin);
        HandlerList.unregisterAll(plugin);

        // Chat
        modules.add(new BannedRegex());
        modules.add(new BannedWords());
        modules.add(new CharacterLimit());
        modules.add(new PreventChatSpam());
        modules.add(new PreventLinks());
        modules.add(new PreventLinkSpam());
        modules.add(new PreventUnicodeDot());
        modules.add(new ReplaceAt());

        // Command
        modules.add(new CommandWhitelist());
        modules.add(new FixChatCoIgnore());

        // 1b1t Options
        modules.add(new DistanceAwayToTP());
        modules.add(new HurtCommands());
        modules.add(new NickResetOnly());
        modules.add(new UseSparkHealth());

        // Misc
        modules.add(new FirstJoinMessage());
        modules.add(new JoinLeaveMessages());

        for (AnarchyExploitFixesModule module : modules) {
            if (module.shouldEnable()) module.enable();
        }
    }
}
