package me.moomoo.anarchyexploitfixes.utils;

import me.moomoo.anarchyexploitfixes.AnarchyExploitFixes;
import org.bukkit.World;
import org.bukkit.entity.Player;

import java.awt.*;

public class ElytraUtils {

    public static boolean canBurst(double burstTPS) {
        return AnarchyExploitFixes.getInstance().tps > burstTPS;
    }

    public static String speed(double flySpeed) {
        return String.format("%.2f", Math.min((double) Math.round(flySpeed * 100.0D) / 100.0D, 20.0D));
    }

    public static boolean isAtSpawn(Player player, int spawn_radius) {
        Point spawnPoint = new Point(0, 0);
        Point playerPoint = new Point(player.getLocation().getBlockX(), player.getLocation().getBlockZ());
        return (playerPoint.distance(spawnPoint) < spawn_radius);
    }

    public static boolean isOnNetherCeiling(Player player) {
        // 123 is the height where bedrock starts to generate on the ceiling. Prevents players from
        // creating ceiling highways for elytras by deleting bedrock. Does not affect normal nether highways.
        return (player.getWorld().getEnvironment().equals(World.Environment.NETHER) && player.getLocation().getY() > 123);
    }
}
