package me.moomoo.anarchyexploitfixes.commands;

import me.moomoo.anarchyexploitfixes.AnarchyExploitFixes;
import me.moomoo.anarchyexploitfixes.commands.aef.AEFCommand;
import me.moomoo.anarchyexploitfixes.commands.help.HelpCommand;
import me.moomoo.anarchyexploitfixes.commands.say.SayCommand;
import me.moomoo.anarchyexploitfixes.commands.toggleconnectionmsgs.ToggleConnectionMsgsCommand;
import org.bukkit.command.Command;
import org.bukkit.command.CommandExecutor;
import org.bukkit.command.CommandMap;
import org.bukkit.command.CommandSender;
import org.jetbrains.annotations.NotNull;

import java.util.HashSet;

public interface AnarchyExploitFixesCommand extends CommandExecutor {

    String label();

    HashSet<AnarchyExploitFixesCommand> commands = new HashSet<>();
    static void reloadCommands() {
        commands.clear();

        commands.add(new AEFCommand());
        commands.add(new ToggleConnectionMsgsCommand());
        commands.add(new SayCommand());
        commands.add(new HelpCommand());

        AnarchyExploitFixes plugin = AnarchyExploitFixes.getInstance();
        CommandMap commandMap = plugin.getServer().getCommandMap();
        for (AnarchyExploitFixesCommand command : commands) {
            plugin.getCommand(command.label()).unregister(commandMap);
            plugin.getCommand(command.label()).setExecutor(command);
        }
    }

    @Override
    boolean onCommand(@NotNull CommandSender sender, @NotNull Command command, @NotNull String label, String[] args);
}
