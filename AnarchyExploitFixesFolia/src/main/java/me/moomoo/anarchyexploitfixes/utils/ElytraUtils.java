package me.moomoo.anarchyexploitfixes.utils;

import me.moomoo.anarchyexploitfixes.AnarchyExploitFixes;
import org.bukkit.Location;
import org.bukkit.World;
import org.bukkit.entity.Player;

import java.awt.*;
import java.text.DecimalFormat;

import static org.apache.commons.math3.util.FastMath.hypot;
import static org.apache.commons.math3.util.FastMath.min;

public class ElytraUtils {

    public static double blocksPerTick(Location from, Location to) {
        return hypot(
                to.getX() - from.getX(),
                to.getZ() - from.getZ()
        );
    }

    public static String speed(double flySpeed) {
        return new DecimalFormat("0.00").format(min(flySpeed, 20.0));
    }

    public static boolean isAtSpawn(Player player, int spawn_radius) {
        return new Point(player.getLocation().getBlockX(), player.getLocation().getBlockZ()).distance(new Point(0, 0)) < spawn_radius;
    }

    public static boolean isOnNetherCeiling(Player player) {
        return player.getWorld().getEnvironment().equals(World.Environment.NETHER) && player.getLocation().getY() > AnarchyExploitFixes.getConfiguration().nether_ceiling_max_y-1;
    }
}
